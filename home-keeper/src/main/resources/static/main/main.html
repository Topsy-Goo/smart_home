<div style="margin: 10px;">
	{{home_dto.name}}
	<br>
	{{home_dto.string}}
	<br>
	<br>
	<br>
	<div ng-repeat="type_group in home_dto.groups"><!-- HTML-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ -->
		<h4 align="center">{{type_group.typeName}}</h4>
		<div ng-repeat="device in type_group.devices" class="device_panel">
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∞–Ω–µ–ª–∏ ‚Äî –≤–∏–¥–µ–Ω –≤—Å–µ–≥–¥–∞. -->
			<div>
				<table	class="table-success table-striped margin_bottom_0 col-12"
						style="background-color: {{panelHeaderColor1(device.state.active)}};"><!-- ; -->
					<tr><td class="col-5"><!--  -->
							<nobr>{{device.abilities.vendorString}}</nobr><br>
			<!-- –§–æ—Ä–º–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –£–£. --><!-- –§–æ—Ä–º–∞ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è device.friendlyName. -->
							<form	class="align-middle input-group input-group-sm"
									ng-submit="applyNewFriendlyName(device, newFriendlyName);"
									ng-init="newFriendlyName.string = device.friendlyName">
								<input	id="friendlyNameInput"
                                		class="form-control form-control-sm"
										style="margin: 0px 5px 0px -5px; background-color: {{panelHeaderColor2(device.state.active)}}; font-weight: 600;"
                                		type="text"
										ng-model="newFriendlyName.string"
										ng-trim="true"
										value="{{newFriendlyName.string}}"
										required="required"><!--  -->
								<button	id="friendlyNameSubmit"
                                		class="btn btn-sm btn-outline-primary"
										title="–ó–∞–ø–æ–º–Ω–∏—Ç—å –Ω–æ–≤–æ–µ –∏–º—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
                                		type="submit"><b>üñâ</b></button><!-- –ó–∞–ø–æ–º–Ω–∏—Ç—å -->
							</form>
							{{device.state.opCode}} <span ng-show="device.state.errCode">(–∫–æ–¥: {{device.state.errCode}})</span>
						</td>
						<td class="col-5"><!--  -->
							<div>
								{{getActiveString(device.state.active)}}<br>
								{{device.state.currentTask.name}} ({{device.state.currentTask.tstate}}) :
															{{device.state.currentTask.elapsed}} / {{device.state.currentTask.duration}}
								<progress	id="task_progress" style="width: 80%;"
											value="{{device.state.currentTask.elapsed}}"
											max="{{device.state.currentTask.duration}}"><!--  -->
									{{device.state.currentTask.elapsed}} –∏–∑ {{device.state.currentTask.duration}} —Å–µ–∫.
								</progress>
							</div>
						</td>
						<td class="col-2"><!--  -->
							<!-- –ö–Ω–æ–ø–∫–∞ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. --><!--  -->
							<button class="btn btn-sm btn-outline-success col-12" style="margin-bottom: 5px;"
									title="–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å/–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
									ng-click="toggleDeviceActiveState(device.abilities.uuid)">
<!--								{{getButtonNameActivate(deviceState.active)}}-->
								{{getButtonNameActivate(device.state.active)}}
							</button>
							<br>
							<!-- –ö–Ω–æ–ø–∫–∞ –ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. --><!--  -->
							<button class="btn btn-sm btn-outline-primary col-12"
									title="–ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞"
									ng-click="togglePanelOpenedState(device.abilities.uuid)">
								{{getButtonNameShowPanel(device.abilities.uuid)}}
							</button><!--  -->
						</td>
					</tr>
				</table>
			</div>
<!-- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å –ø–∞–Ω–µ–ª–∏, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç–∞. -->
			<div class="almost_windows" ng-show="isPanelOpened(device.abilities.uuid)"
				 style="padding: 20px 20px 20px 20px; background-color: {{panelBodyColor(device.state.active)}};"><!--  -->
				<!-- –í–∏–¥–µ–æ -->
				<div ng-if="device.state.videoImageSource" class="smartPanelOpened sensorsTable"
					style="display: flex; justify-content: center;"><!--  -->
					<img style="background-color: hsl(0, 0%, 25%);"
						 width="320" height="240"
						 src="{{device.state.videoImageSource}}"><!--  -->
			<!--	<button ng-click="startVideoStreaming (device)">–°—Ç–∞—Ä—Ç</button>
					<button ng-click="stopVideoStreaming (device)">–°—Ç–æ–ø</button>-->
				</div>
				<div style="display: flex; justify-content: center;" ng-if="device.state.videoImageSource">
					device.state.videoImageSource = {{device.state.videoImageSource}}<br>
				</div>
				<!-- –î–∞—Ç—á–∏–∫–∏ -->
				<div ng-if="device.state.sensors" class="smartPanelOpened">
					<!--{{device.state.sensors}}<br>-->
					<legend class="smartLegend"><nobr>–î–∞—Ç—á–∏–∫–∏ :</nobr></legend>
					<table cellspacing="10" border="0" class="sensorsTable"><!--  -->
						<tr ng-repeat="sn in device.state.sensors">
							<td>{{sn.type}}</td>
							<td style="padding: 0px 10px 0px 10px;">
							<!-- –§–æ—Ä–º–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –¥–∞—Ç—á–∏–∫–∞. -->
								<form	class="align-middle input-group input-group-sm"
									ng-submit="applyNewSensorName(sn, newSensorName);"
									ng-init="newSensorName.string = sn.name">
								<input	id="sensorNameInput"
                                		class="form-control form-control-sm"
										style="background-color: #FBF9EF; font-weight: 600;"
                                		type="text"
										ng-model="newSensorName.string"
										ng-trim="true"
										value="{{newSensorName.string}}"
										required="required">
								<button	id="sensorNameSubmit"
                                		class="btn btn-sm btn-outline-primary"
                                		title="–ó–∞–ø–æ–º–Ω–∏—Ç—å –Ω–æ–≤–æ–µ –∏–º—è –¥–∞—Ç—á–∏–∫–∞"
                                		type="submit"><b>üñâ</b></button>
								</form>
								</td>
							<td style="padding: 0px 10px 0px 10px;">
									<button class="btn btn-sm btn-outline-info col-12" ng-click="turnSensor(sn)"
										title="–í–∫–ª—é—á–∏—Ç—å / –≤—ã–∫–ª—é—á–∏—Ç—å –¥–∞—Ç—á–∏–∫">
									{{sn.on?"–í—ã–∫–ª—é—á–∏—Ç—å":"–í–∫–ª—é—á–∏—Ç—å"}}
								</button><!-- "–í—ã–∫–ª—é—á–∏—Ç—å":"–í–∫–ª—é—á–∏—Ç—å" -->
								</td>
							<td style="padding: 0px 10px 0px 10px;">
								<button ng-show="sn.on" class="btn btn-sm btn-outline-info" ng-click="alarmSensor(sn)"
										title="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –¥–∞—Ç—á–∏–∫–∞ –≤ —Ç—Ä–µ–≤–æ–∂–Ω–æ–º —Ä–µ–∂–∏–º–µ">–¢–µ—Å—Ç</button>
								<button ng-show="!(sn.on)" class="btn btn-sm btn-outline-secondary" disabled
										title="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –¥–∞—Ç—á–∏–∫–∞ –≤ —Ç—Ä–µ–≤–æ–∂–Ω–æ–º —Ä–µ–∂–∏–º–µ">–¢–µ—Å—Ç</button>
								</td>
							<td><img src="{{sensorLightStateImage (sn.on, sn.alarm)}}"></td>
							<!--<td>bindable:{{sn.bindable?"bindable":"non bindable"}}</td>-->
							<!--<td>{{sn.uuid}}‚Ä¢{{sn.deviceUuid}}</td>-->
							<!--<td>{{sn.on}}‚Ä¢{{sn.alarm}}</td>-->
						</tr>
					</table>
				</div>
				<!-- –§–æ—Ä–º–∞ –¥–ª—è –∑–ø—É—Å–∫–∞ –∑–∞–¥–∞—á–∏. -->
				<div ng-if="showTasksForm(device.abilities.tasks)" class="smartPanelOpened">
					<legend class="smartLegend"><nobr>–ó–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏ :</nobr></legend>
					<form	class="align-middle col-12 sensorsTable"><!--  -->
						<div class="input-group-sm" style="margin-left: -15px;"><!--  -->
							<nobr>–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É :</nobr><!--  -->
							<select	id="taskList"	name="taskList"
									class="form-select form-select-sm smartinput150"
									required="required"
									ng-model="taskToLaunch"><!--  -->
								<option selected></option>
								<option ng-repeat="tsk in device.abilities.tasks" value="{{tsk.name}}">
										{{tsk.name}} ({{tsk.duration}} —Å–µ–∫.)
								</option>
							</select>
							<nobr>–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ :</nobr>
							<button id="taskSubmit"
									class="btn btn-sm btn-outline-warning"
									style="margin-left: 10px;"
									type="button"
									ng-show="taskToLaunch"
									ng-click="launchTask (device,taskToLaunch)">
									–ó–∞–ø—É—Å—Ç–∏—Ç—å
							</button><!-- –ó–∞–ø—É—Å—Ç–∏—Ç—å -->
							<button id="taskSubmitDisabled"
									class="btn btn-sm btn-outline-warning"
									style="margin-left: 10px;"
									type="button"
									ng-show="!taskToLaunch"
									disabled>
									–ó–∞–ø—É—Å—Ç–∏—Ç—å
							</button><!-- –ó–∞–ø—É—Å—Ç–∏—Ç—å (–∑–∞–ø—Ä–µ—â–µ–Ω–∞) -->
							<button id="taskInterrupt"
									class="btn btn-sm btn-outline-secondary"
									style="margin-left: 10px;"
									type="button"
									ng-show="showInterruptTaskButton (device.state.currentTask)"
									ng-click="interruptCurrentTask (device)">
									–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
							</button><!-- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å -->
							<button id="taskInterruptDisabled"
									class="btn btn-sm btn-outline-secondary"
									style="margin-left: 10px;"
									type="button"
									ng-show="!showInterruptTaskButton (device.state.currentTask)"
									disabled><!-- -->
									–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
							</button><!-- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (–∑–∞–ø—Ä–µ—â–µ–Ω–∞) -->
							<button id="taskSchedule"
									class="btn btn-sm btn-outline-success"
									style="margin-left: 50px;"
									type="button"
									ng-show="taskToLaunch"
									ng-click="scheduleTask (device, taskToLaunch)"><!--  -->
									–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
							</button><!-- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å -->
							<button id="taskScheduleDisabled"
									class="btn btn-sm btn-outline-success"
									style="margin-left: 50px;"
									type="button"
									ng-show="!taskToLaunch"
									disabled><!--  -->
									–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
							</button><!-- –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å (–∑–∞–ø—Ä–µ—â–µ–Ω–∞) -->
						</div>
					</form>
				</div>
				<!-- –§–æ—Ä–º–∞ –¥–ª—è —Å–≤—è–∑—ã–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤. -->
				<div ng-show="showSlaveBindingForm(device)" class="smartPanelOpened">
					<legend class="smartLegend"><nobr>–°–≤—è–∑—ã–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ :</nobr></legend>
					<form	class="align-middle col-12 sensorsTable"><!--  -->
						<div class="input-group-sm" style="margin-left: -15px;"><!--  -->
							<!-- –ó–∞–¥–∞—á–∞ –º–∞—Å—Ç–µ—Ä–∞: -->
							<nobr>–í—ã–±–µ—Ä–∏—Ç–µ –∑–∞–¥–∞—á—É :</nobr><!--  -->
							<select	id="taskList-bind"	name="taskList"
									class="form-select form-select-sm smartinput150"
									required="required"
									ng-model="slaveBindingModel.masterTaskName"
									ng-change="loadDeviceSlaveList(device, slaveBindingModel.masterTaskName);">
								<option selected></option>
								<option ng-repeat="tskb in device.abilities.tasks" value="{{tskb.name}}">{{tskb.name}}</option>
							</select>
							<!-- –°–ª—ç–π–≤: -->
							<nobr>–í—ã–±–µ—Ä–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ :</nobr> <!--  -->
							<select	id="slaveList-bind"
									class="form-select form-select-sm smartinput150"
									required="required"
									ng-model="slaveBindingModel.slaveUUID"
									ng-change="requestSlaveBindableFunctions(device, slaveBindingModel.slaveUUID)">
									<!-- ng-change —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –≤—ã–±–æ—Ä –Ω–µ–ø—É—Å—Ç–æ–≥–æ –ø—É–Ω–∫—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–≥—Ä—É–∑–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–ª—è
										 —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç device.bindableFunctions. -->
								<option selected></option>
								<option ng-repeat="slave in device.slaveList" value="{{slave.uuid}}">{{slave.displayName}}</option>
							</select>
							<!-- —Ñ-—Ü–∏–∏ —Å–ª—ç–π–≤–∞ -->
							<nobr> –∏ —Ñ—É–Ω–∫—Ü–∏—é :</nobr> <!--  -->
							<select	id="slaveTask-bind"
									class="form-select form-select-sm smartinput150"
									required="required"
									ng-model="slaveBindingModel.slaveFuctionUUID">
								<option selected></option>
								<option ng-repeat="tsk in device.bindableFunctions" value="{{tsk.uuid}}">&nbsp;{{tsk.displayName}}&nbsp;&nbsp;</option>
							</select>
							<button id="slaveBindButton"
									class="btn btn-sm btn-outline-warning"
									style="margin-left: 10px;"
									type="button"
									ng-click="bindSlave (device, slaveBindingModel)"><!-- submit -->
									–°–≤—è–∑–∞—Ç—å
							</button><!-- –°–≤—è–∑–∞—Ç—å -->
						</div>
					</form>
				</div>
				<!-- –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —É –º–∞—Å—Ç–µ—Ä–∞). -->
				<div ng-show="device.contracts" class="smartPanelOpened">
					<legend class="smartLegend"><nobr>–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ : </nobr></legend><!--  -->
					<form	class="align-middle col-12"
							ng-submit="deleteContract (device, contractToRemove)"><!--  -->
						<div class="input-group-sm"><!--  -->
							<select class="form-select smartselect" size="5" style="width: 99%;"
									ng-show="device.contracts"
									ng-model="contractToRemove.data">
								<option ng-repeat="contract in device.contracts" value="{{contract}}"><!--  -->
									{{contract.taskName}} ‚Ä¢ {{contract.mateFriendlyName}} ({{contract.functionFriendlyName}})
								</option>
							</select><br>
							<button id="unBindButton"
									class="btn btn-sm btn-outline-dark col-2"
									type="submit"
									ng-show="contractToRemove.data">
									–û—Ç–≤—è–∑–∞—Ç—å
							</button><!-- –û—Ç–≤—è–∑–∞—Ç—å -->
							<button id="unBindButtonDisabled"
									class="btn btn-sm btn-outline-dark col-2"
									type="submit"
									disabled
									ng-show="!(contractToRemove.data)">
									–û—Ç–≤—è–∑–∞—Ç—å
							</button><!-- –û—Ç–≤—è–∑–∞—Ç—å (–∑–∞–ø—Ä–µ—â–µ–Ω–∞) -->
						</div>
					</form>
				</div>
				<!-- –û—Ç–ª–∞–¥–æ—á–Ω—ã–π —Å–ø–∏—Å–æ–∫ -->
				<ul ng-if="false">
					<!--<li>device.abilities.deviceType : {{device.abilities.deviceType}}</li>-->
					<!--<li>device.abilities.vendorString : {{device.abilities.vendorString}}</li>-->
					<!--<li>device.abilities.uuid : 	  {{device.abilities.uuid}}</li>--><!--  -->
					<!--<li>device.abilities.canSleep :   {{device.abilities.canSleep}}</li>-->
					<!--<li>device.abilities.master :   {{device.abilities.master}}</li>-->
					<!--<li>device.abilities.slave :   {{device.abilities.slave}}</li>-->
					<!--<li>device.abilities.tasks :	<span ng-repeat="ts in device.abilities.tasks"><br>	  <b>{{ts.name}}</b>, autonomic:{{ts.autonomic}}, interruptible:{{ts.interruptible}}, duration:{{ts.duration}}—Å–µ–∫., message:{{ts.message}}</span></li>-->
					<!--<li>device.abilities.sensors :	<span ng-repeat="sen in device.abilities.sensors"><br><b>{{sen.type}}</b>, on:{{sen.on}}, alarm:{{sen.alarm}}</span></li>-->
					<!--<li>device.abilities.sensors :	<span ng-repeat="sen in device.abilities.sensors"><br><b>{{sen.type}}</b>, on:{{sen.on}}, alarm:{{sen.alarm}}</span></li>-->
<!-- –°–æ—Å—Ç–æ—è–Ω–∏—è –¥–∞—Ç—á–∏–∫–æ–≤ –£–£. -->
					<!--<li>device.slaveList: 			<span ng-repeat="slave in device.slaveList"><br>	  <b>{{slave.displayName}}</b>, {{slave.uuid}}</span></li>-->
					<!-- device.slaveList –ø—Ä–∏—Ö–æ–¥–∏—Ç –ø—É—Å—Ç–æ–π. –ß—Ç–æ–±—ã –µ–≥–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –±—ç–∫.
						 –ö–∞–∂–µ—Ç—Å—è, ng-if –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ —Ä–∞–Ω—å—à–µ, —á–µ–º ng-init.
						 –ö–∞–∂–µ—Ç—Å—è, ng-show –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ ng-init.
						 –ö–∞–∂–µ—Ç—Å—è, ng-if –∏ ng-show –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤—Å—è–∫–∏–π —Ä–∞–∑, –∫–∞–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —á—Ç–æ-—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è; –≤–∏–¥–∏–º–æ, –ø–æ—ç—Ç–æ–º—É
						 –±—Ä–∞—É–∑–µ—Ä –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –≥—Ä—É–∑–∏—Ç –∏–∑ –±—ç–∫–∞ slaveList, –µ—Å–ª–∏ –µ–≥–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏–∑ showSlavesForm().
					-->
<!-- –¢–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞. -->
					<li>device.state.currentTask :
						<select class="form-select col-12" size="8">
							<option value="{{device.state.currentTask.name}}"			>device.state.currentTask.name : 		  {{device.state.currentTask.name}}			</option>
							<option value="{{device.state.currentTask.tstate}}"			>device.state.currentTask.tstate : 		  {{device.state.currentTask.tstate}}		</option>
							<option value="{{device.state.currentTask.autonomic}}"		>device.state.currentTask.autonomic : 	  {{device.state.currentTask.autonomic}}		</option>
							<option value="{{device.state.currentTask.interruptible}}"	>device.state.currentTask.interruptible : {{device.state.currentTask.interruptible}}	</option>
							<option value="{{device.state.currentTask.running}}"		>device.state.currentTask.running :		  {{device.state.currentTask.running}}			</option>
							<option value="{{device.state.currentTask.duration}}"		>device.state.currentTask.duration : 	  {{device.state.currentTask.duration}}		</option>
							<option value="{{device.state.currentTask.remained}}"		>device.state.currentTask.remained : 	  {{device.state.currentTask.remained}}		</option>
							<option value="{{device.state.currentTask.elapsed}}"		>device.state.currentTask.elapsed : 	  {{device.state.currentTask.elapsed}}		</option>
							<option value="{{device.state.currentTask.message}}"		>device.state.currentTask.message : 	  {{device.state.currentTask.message}}		</option>
						</select>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<br><br>
</div>
<!--  -->